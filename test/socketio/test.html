<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="socket.io-1.4.5.js"></script>
<script type="text/javascript">
// var socket = io.connect('http://120.27.138.242:3003');
// socket.on('connect', function(){
// 	socket.emit('join', { username: 'xxx'});
// })
//
// socket.on('danmu', function(data){
// 	console.log(data);
// })
//
var interactionId = 'interaction-id';
var nickname = "打地鼠";
var avatar = "http://xxxx.png";
var userId = Math.random();

function sendMessage(){
	socket.emit('send message', {
    interactionId: interactionId,
    nickname: nickname,
    avatar: avatar,
    message: $('#message').val()
  })
}

var socket = io('http://localhost:3003');

socket.emit('join interaction', {
  interactionId: 'xxxx',
  nickname: nickname,
  avatar: avatar,
  userId: userId
});

socket.on('new message', function (data) {
  console.log('new message', data);
})

socket.on('joined', function (data) {
	console.log('joined', data);
})
</script>

<input type="text" id="message">
<button onclick="sendMessage()">send</button>
